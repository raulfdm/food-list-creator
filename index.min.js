
'use strict';var Product=function Product(){this.id;this.name;this.quantity;this.price;this.isPerItem;this.priceUn;this.total;};Product.prototype.setName=function(name){this.name=name;return this;};Product.prototype._stringToFloat=function(value){return parseFloat(value);};Product.prototype.setQuantity=function(quantity){this.quantity=this._stringToFloat(quantity);return this;};Product.prototype.setPrice=function(price){this.price=this._stringToFloat(price);return this;};Product.prototype.calculateMethod=function(isPerItem){this.isPerItem=isPerItem;return this;};Product.prototype.calculateTotal=function(){this._validateInformations();if(this.isPerItem){this.total=this._parseDecimal(this.quantity*this.price);this.priceUn=this.price;}else{this.total=this.price;this.priceUn=this._parseDecimal(this.total/this.quantity);}
return this;};Product.prototype._parseDecimal=function(value){return this._stringToFloat(value.toFixed(2));};Product.prototype._validateInformations=function(){var error='';if(!this.name){error='Name needs to be defined';}else if(!this.price){error='Price needs to be defined';}else if(!this.quantity){error='Quantity needs to be defined';}else if(!this.isPerItem){if(typeof this.isPerItem!=='boolean'){error='Calculate method must be a boolean.';}else if(this.isPerItem===undefined||this.isPerItem===null){error='Calculate Method (isPerItem) needs to be defined';}}else if(isNaN(this.price)){error='Price must be a valide number (int or float)';}else if(isNaN(this.quantity)){error='Quantity must be a valide number (int or float).';}
if(error){throw new Error(error);}
return true;};Product.prototype.setId=function(id){if(id){this.id=parseInt(id);}else{this._generateId();}
return this;};Product.prototype._generateId=function(){this.id=new Date().getTime()+Math.floor(Math.random()*100000000);return this;};Product.prototype.getInnerHTML=function(){if(this._validateInformations()){return'\n        <label class="checkbox product-list__item" data-id="'+this.id+'">\n                        <input type="checkbox">\n                            '+this.toString()+'\n                        </input>\n        </label>\n    ';}};Product.prototype.toString=function(){return this.quantity+'x - '+this.name+' - \u20AC '+this.total+' '+(this.quantity>1?'(\u20AC '+this.priceUn+' each)':'');};

'use strict';new Clipboard('#btn-copy',{text:function text(trigger){return copyItems();}}).on('success',function(e){e.trigger.classList.toggle('tooltiped');setTimeout(function(){e.trigger.classList.toggle('tooltiped');},1000);});

'use strict';function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i];}return arr2;}else{return Array.from(arr);}}
var application={productList:[],total:0.0};var LOCAL_STORAGE={space:'list_of_products',cleanList:function cleanList(){localStorage.removeItem(this.space);},update:function update(list){if(!list)throw new Error('To update localStorage, some value is required');localStorage.setItem(this.space,JSON.stringify(list));return this.getStorage();},getStorage:function getStorage(){var listOfObjects=JSON.parse(localStorage.getItem(this.space))||[];return listOfObjects.map(function(object){return createProduct(object);});}};var getDecimal=function getDecimal(value){return parseFloat(Number(value).toFixed(2));};var createProduct=function createProduct(product){return new Product().setName(product.name).setQuantity(product.quantity).setPrice(product.price).setId(product.id).calculateMethod(product.isPerItem?true:false).calculateTotal();};var loadGrid=function loadGrid(listOfProducts){var $listContent=document.querySelector('.list-content');var result=listOfProducts.reduce(function(prev,product){return prev+=product.getInnerHTML();},'');$listContent.innerHTML=result;updateTotal(listOfProducts);};var saveProduct=function saveProduct(product){application.productList.push(product);loadGrid(LOCAL_STORAGE.update(application.productList));};var cleanProductList=function cleanProductList(){var arrayOfProductNodes=[].concat(_toConsumableArray(document.querySelectorAll('.product-list__item')));arrayOfProductNodes.map(function(node){return node.remove();});application.productList.length=0;LOCAL_STORAGE.cleanList();updateTotal();};var updateTotal=function updateTotal(){var productList=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var $totalBill=document.querySelector('.list-footer__total-value');var newTotal=0.0;if(productList.length>0){newTotal=productList.reduce(function(amount,product){return getDecimal(amount+product.total);},0.0);}else{newTotal='0.00';}
$totalBill.textContent=newTotal;};var cleanInputs=function cleanInputs($inputs){var name=$inputs.name,qtde=$inputs.qtde,price=$inputs.price;name.value='';name.focus();qtde.value=1;price.value='';handleErrorClass.removeClass(name,'is-success');handleErrorClass.removeClass(qtde,'is-success');handleErrorClass.removeClass(price,'is-success');};var deleteProduct=function deleteProduct(idProduct){var newList=application.productList.filter(function(product){return product.id!==parseInt(idProduct);});application.productList=newList;LOCAL_STORAGE.update(newList);loadGrid(newList);};var $buttonInsertItem=document.querySelector('#btn-insert');var $buttonDeleteElements=document.querySelector('#btn-delete-itens');application.productList=LOCAL_STORAGE.getStorage();loadGrid(application.productList);var insertItem=function insertItem(e){var $inputs={name:document.querySelector('#product-name'),qtde:document.querySelector('#product-qtde'),price:document.querySelector('#product-price'),calcMethod:document.querySelector('#product-method__item')};if(!validateForm($inputs))return;var product=createProduct({name:$inputs.name.value,quantity:$inputs.qtde.value,price:$inputs.price.value,isPerItem:$inputs.calcMethod.checked});saveProduct(product);cleanInputs($inputs);};var cleanList=function cleanList(e){var $list=document.querySelectorAll('.product-list__item');var productsChecked=[].concat(_toConsumableArray($list)).filter(function(element){return element.children[0].checked;});if(productsChecked.length>0){if(confirm('Do you really like to delete '+productsChecked.length+' itens?')){productsChecked.map(function(product){deleteProduct(product.dataset.id);product.remove();});}}else if($list.length>0){if(confirm('Do you really want to clean this list?')){cleanProductList();}}};var copyItems=function copyItems(){return application.productList.reduce(function(prev,product){return prev+=product.toString()+'\n';},"");};var handleErrorClass={errorClass:'is-danger',hiddenClass:'hidden',successClass:'is-success',removeClass:function removeClass(element,className){element.classList.remove(className);},addClass:function addClass(element,className){element.classList.add(className);},on:function on(element){var _this=this;this.addClass(element,this.errorClass);[].concat(_toConsumableArray(element.parentNode.children)).map(function(child){if(child.classList.contains('help')){_this.addClass(child,_this.errorClass);_this.removeClass(child,_this.hiddenClass);}});},off:function off(element){var _this2=this;this.removeClass(element,this.errorClass);this.addClass(element,this.successClass);[].concat(_toConsumableArray(element.parentNode.children)).map(function(child){if(child.classList.contains('help')){_this2.removeClass(child,_this2.errorClass);_this2.addClass(child,_this2.hiddenClass);}});}};var validateForm=function validateForm($inputs){var validate=true;var name=$inputs.name,price=$inputs.price,qtde=$inputs.qtde;if(price.value<=0){price.focus();handleErrorClass.on(price);validate=false;}else{handleErrorClass.off(price);}
if(qtde.value<=0){qtde.focus();handleErrorClass.on(qtde);validate=false;}else{handleErrorClass.off(qtde);}
if(!name.value){handleErrorClass.on(name);name.focus();validate=false;}else{handleErrorClass.off(name);}
return validate;};$buttonInsertItem.addEventListener('click',insertItem);window.addEventListener('keypress',function(e){if(e.keyCode!==13)return;insertItem();});$buttonDeleteElements.addEventListener('click',cleanList);

'use strict';Inputmask({mask:'9{1,9}.99',placeholder:'0',greedy:false,numericInput:true}).mask(document.querySelector('#product-price'));
//# sourceMappingURL=index.min.js.map
